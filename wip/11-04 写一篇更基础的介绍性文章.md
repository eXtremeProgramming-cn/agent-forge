我想写一篇更基础的文章来解释：什么是多智能体系统（MAS），以及为什么要有这样的系统。

我的目标读者是原来的软件从业者和软件开发者。他们还在摸索AI时代的软件应该是什么形态。我要解释：MAS可能昭示一种未来的软件形态。

你可以先查看这个工程里已有的东西，对我们在做的事有个基本了解。

我的一些内容思路：

* 我们需要从“长提示词”入手。我的一篇文章（`doc/references/plop_paper v4.0.md`）介绍了一些提示词技巧，但所有这些技巧同时也意味着提示词越来越长。你可以看到，我甚至有一个模式叫“附件”，也就是说在这种工作模式下用户可能会上传一堆长文件。这些文件本质上来说其实都是一个巨长的提示词的一部分。有些时候我的提示词已经达到了数十万words的规模。

* 随着长提示词而来的问题，对于我这个程序员来说是显而易见的：
    - 大量且详细的指示，会让LLM很容易超出上下文窗口，或者注意力失焦，或者自主做简化，总之很难达到长提示词想要的那么完美的效果；
    - 长提示词经常出现“牵一发动全身”的情况，你觉得是有模块划分，其实所有模块都被load到LLM里，互相还是在产生影响，不会有模块的隔离效果；
    - 长提示词的维护也很麻烦，比如参数传递几乎是不可能的，你基本上只能在整个长提示词的外围给一些参数（实际上是全局常量），几乎不可能从一个模块中产生一些变量、然后用这些变量来调用别的模块。

* 用软件开发来类比，长提示词本质上是静态的代码include，最终执行的还是一整个完整的源文件。这是很原始的软件模块化和复用的方式。它不可避免地会带来前面这些问题。

* 软件开发中对策这些问题的办法也很清楚：
    - 超越源代码include，定义真正的“模块”
    - 包括静态链接库、动态链接库，乃至后面的RPC、Web Services，本质上都是这样的模块
    - 一个模块有它自己的边界、它自己的生命周期
    - 一个模块对外暴露的是输入、输出、职能，而不是内部实现

* 同样的思路搬到使用大模型这里，我们也需要类似这样的“模块”概念
    - 一个模块有自己的边界、自己的运行时生命周期，有明确的输入输出和职能
    - 因此一个模块也使用自己的上下文窗口，运行完以后就释放了，也就是说你就可以运行一个无限大的任务，只要你有合理的模块划分
    - 这就对运行提示词的环境提出了要求，比如说在Gemini的对话框里你是没办法要求说“在一个独立的上下文窗口里运行这个模块”的，那么你就只能自己去另外开一个会话来运行，把运行结果保存成文件，然后用这个文件作为输入再运行下一个任务，如此反复
    - 目前我所知道的运行时环境最合适的就是Claude Code，因为它的Subagent能力可以单开一个上下文窗口来运行一个模块，运行完以后回收；它的Bash能力又可以操作目录和文件，从而实现模块间的数据传递
    - 因此可以说，比Claude Code弱的环境（典型的就是Gemini或ChatGPT的web界面）是残疾的，起码要有Claude Code这种级别的能力才是一个完备的多智能体系统运行时环境

* 于是我们就有了一些基本的概念，而不是用“提示词”这样原始的概念来描述：
    - 模块：有自己的边界、自己的上下文窗口、自己的运行时生命周期，有明确的输入输出和职能，模块之间可以传递数据。
    - 智能体：在我们这里一个“模块”也被称为一个“智能体”，也就是模块的一种实现方式。智能体的源文件叫“智能体蓝图”，智能体在运行时叫“智能体实例”。
    - 参数：一个智能体调用另一个智能体时可以传入参数，参数可以很短（例如一个单词、一个日期、一个缩写），也可以相当长（一大段文字），但是不建议特别特别长。目前来看，Claude Code只支持入参，不支持出参或返回值：一个模块执行完就是执行完，别的模块没法知道这个模块执行的效果如何，除非去查看它生成的文件。
    - 作为数据管道的文件：可以作为一个模块的输入（告诉它去哪里读取什么信息），也可以作为一个模块的输出（把结果/中间产物写到某些目录、某些文件）
    - 参考库：它们是相对静态的文件（例如“马克思主义认识论”），它们不作为智能体运行，而是在智能体运行时读取它们用来获得某些信息或某些指导。（我也不知道是不是描述清楚了。）

* 有了模块概念的基础之上，我们才能探讨模块的设计——而不是“提示词怎么写”。下一步我们将借用面向对象的一些设计原则来讨论智能体设计的原则，例如：
    - 单一职责原则（SRP）
    - 开放 - 封闭原则（OCP）
    - 依赖倒置原则（DIP）
    - 迪米特法则（LOD）
    - 合成复用原则（CRP）

首先我想请你仔细、严苛地检验一下我这个思路，给我提出意见和建议。

---

把你建议的文章结构写进到wip/下面的一个文件里。我有几点意见：

* 引言部分不需要

* 4.3引入架构模式太早了，不要

* 6部分需要介绍的不是AgentForge，而是它生成的一个MAS（例如conjuncture-analyzer）。如果你能想象这样一个MAS的话就想象一下来写，毕竟我们不需要太深入细节。如果你想象不了请告诉我，我给你想办法。

* 结语不要

